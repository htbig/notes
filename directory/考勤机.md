# 考勤机
* 转化csv文件命令
```
cat user.csv | awk -F',' '{printf("%s,%s,,,0,,True,1,,,,0\n", $2,$5)}'>new.csv
$0 所有字符串, $1 第一个
去掉重复行
cat new.csv | sort | uniq > xxx.csv
```
## 遇到问题
* sdk使用前先注册Register_SDK.bat，使用udp协议，端口4370
* 有时候进不了管理界面？
```
可以通过删掉所有用户重新添加超级管理员来解决，或者直接删掉administrators亦可以解决
```
* 登记人脸一直登记不进去？
```
因为人脸已经录入过，可以通过进入管理员界面，删掉已经录入的人脸解决
```
* enable位标识用户启用标记？
```
1为启用，0为禁用，当将管理员用户设置0禁用的话，它将无法登陆到管理界面
```
* 为什么 For idwFingerIndex = 0 To 9，是0到9？
```
因为人只有10只手指头。index分别为不同的手指头0~9
```
* flag是什么意思？
```
flag表示指纹是否有效或者是否为胁迫指纹，0：指纹无效，1：指纹有效，2：胁迫指纹
```
* 中文名字上传乱码问题？
```
解决方案1：因为Windows上csv文件保存以ANSI格式保存，所以代码里读出来中文是乱码，可以将csv文件转换未utf-8保存就行
解决方案2：通过代码里面保存文件为utf-8解决
由于我们可能用英文保存用户，所以如果有中文需求，就直接用方案1解决
```
* userinfo工程用于下载（到csv文件）和上传(从csv文件读取)用户信息，反正就是跟用户相关的，添加了用户刷卡或者人脸或者指纹成功之后发送实时消息给rest api，添加了下载考勤数据和清除考勤数据，用ut-iot的wifi导出324个用户话19分10s左右时间，批量上传花接近20s
* attLogs用于下载考勤记录到csv 文件和清楚考勤记录（转移到userinfo）
* RTEvents用于有考勤校验成功就发送数据给其他rest api,并且在发送失败的地方记log(转移至userinfo)
* Card Management用来操作卡，获取卡号，写用户卡号，这两个功能都已经在userinfo中已经实现，还有一个empty和write card功能，可以将用户指纹信息写如卡中
* 管理记录下载流程？
```
没有sample code
```
* 可以设置开门延时时间的，都在access control里
```
GetACFun参数返回值为1，文档说15是有门禁？
工程里都是用户时间段，开门延时等的一些控制
```
* 可以实现下高速上传，对比下速度，批量上传大概是逐个上传速度的4倍（一个6s,一个23s,325个用户测试）
* 每个用户都有15张人脸模板，每个模板2576字节，各个不同角度。
* 删除一个用户，它的考勤记录是否会删掉？
```
没有删掉，还在
```
* 考勤成功是否含有头像？
```
它工作原理是：
员工在机器上录入人脸的最近的图片作为显示在考勤校验时左边的显示，所以在没有录入人脸的机器上是不会显示的，然后从其他机器同步过来的人脸数据只是作为校验手段，而不是左边的显示。
```
